{{- $title := printf "%s" site.Title }}
{{- if page.IsPage }}
{{- $title = printf "%s &mdash; %s" page.Title site.Title }}
{{- end }}
<head itemscope itemtype="https://schema.org/WebPage">
  {{- if site.Config.Services.GoogleAnalytics.ID }}
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.Config.Services.GoogleAnalytics.ID }}"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', '{{ site.Config.Services.GoogleAnalytics.ID }}');
  </script>
  {{- end }}
  <meta charset="utf-8" />
  <!-- links -->
  {{- if (isset site.Params "mastodon") }}
  <link rel="me" href="{{ site.Params.Mastodon }}" />
  {{- end }}
  {{- if (isset site.Params "github") }}
  <link rel="me" href="{{ site.Params.Github }}" />
  {{- end }}

  <!-- display -->
  <link rel="stylesheet" href="{{ relURL "/css/mini.css" }}">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

  <!-- page title -->
  <title>{{ $title | safeHTML }}</title>
  <meta property="og:title" content="{{ $title | safeHTML }}" />
  <meta name="twitter:title" content="{{ $title | safeHTML }}" />
  <meta itemprop="name" content="{{ $title | safeHTML }}" />
  <meta name="application-name" content="{{ $title | safeHTML }}" />
  <meta property="og:site_name" content="{{ site.BaseURL }}" />

  <!-- description -->
  <meta name="description" content="{{ site.Params.Description }}" />
  <meta itemprop="description" content="{{ site.Params.Description }}" />
  <meta property="og:description" content="{{ site.Params.Description }}" />
  <meta name="twitter:description" content="{{ site.Params.Description }}" />

  <!-- links -->
  <base href="{{ page.Permalink }}" />
  <link rel="canonical" href="{{ page.Permalink }}" itemprop="url" />
  <meta name="url" content="{{ page.Permalink }}" />
  <meta name="twitter:url" content="{{ page.Permalink }}" />
  <meta property="og:url" content="{{ page.Permalink }}" />

  <!-- language -->
  <meta property="og:locale" content="{{ site.Language.Lang }}" />
  <meta name="language" content="{{ site.Language.LanguageName }}" />
  <link rel="alternate" hreflang="{{ site.Language.Lang }}" href="{{ page.Permalink }}" title="{{ site.Language.LanguageName }}" />

  <!-- date -->
  <meta property="og:updated_time" content={{ page.Lastmod.Format "2006-01-02T15:04:05Z0700" | safeHTML }} />

  <!-- rss -->
  <link rel="sitemap" type="application/xml" title="Sitemap" href='{{ "sitemap.xml" | absURL }}' />
  <link href="{{ "feed.xml" | absURL }}" rel="alternate" type="application/rss+xml" title="{{ site.Title }}" />
  <link href="{{ "feed.xml" | absURL }}" rel="feed" type="application/rss+xml" title="{{ site.Title }}" />

  <!-- article specific -->
  <meta property="og:type" content="article" />
  <meta property="article:publisher" content="{{ site.Title }}" />
  <meta property="og:article:published_time" content={{ page.Date.Format "2006-01-02T15:04:05Z0700" | safeHTML }} />
  <meta property="article:published_time" content={{ page.Date.Format "2006-01-02T15:04:05Z0700" | safeHTML }} />
  <meta property="og:article:author" content="{{ site.Title }}" />
  <meta property="article:author" content="{{ site.Title }}" />
  <meta name="author" content="{{ site.Title }}" />

  <script defer type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Article",
      "headline": {{ page.Title }},
      "author": {
        "@type": "Person",
        "name": "{{ site.Params.Github }}"
      },
      "datePublished": "{{ page.Date.Format "2006-01-02" }}",
      "description": {{ page.Description }},
      "wordCount": {{ page.WordCount }},
      "mainEntityOfPage": "True",
      "dateModified": "{{ page.Lastmod.Format "2006-01-02" }}",
      "publisher": {
        "@type": "Organization",
        "name": "{{ site.Title }}",
        "logo": {
          "@type": "imageObject",
          "url": "{{ "assets/favicon-32x32.png" | absURL }}"
        }
      }
    }
  </script>

  <!-- favicons -->
  <link rel="shortcut icon" href="{{ "assets/favicon.ico" | absURL }}" />
  <link rel="icon" href="{{ "assets/favicon.ico" | absURL }}" type="image/x-icon" sizes="16x16 32x32" />
  <link rel="icon" href="/favicons/favicon-32.png" sizes="32x32" />
  <link rel="apple-touch-icon" href="{{ "assets/apple-touch-icon.png" | absURL }}" />
  <link rel="apple-touch-icon" sizes="16x16" href="{{ "assets/favicon-16x16.png" | absURL }}" />
  <link rel="apple-touch-icon" sizes="32x32" href="{{ "assets/favicon-32x32.png" | absURL }}" />
  <link rel="apple-touch-icon" sizes="192x192" href="{{ "assets/favicon-192x192.png" | absURL }}" />
  <link rel="apple-touch-icon" sizes="512x512" href="{{ "assets/favicon-512x512.png" | absURL }}" />

  <!-- search crawlers -->
  <meta name="robots" content="index,follow" />
  <meta name="googlebot" content="index,follow" />
</head>
